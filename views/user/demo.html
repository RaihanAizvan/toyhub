<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyber-Pop Hero</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Syne:wght@700;800&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            background-color: #000;
        }
        
        h1, h2, h3 {
            font-family: 'Syne', sans-serif;
        }

        /* Abstract Background shapes */
        .bg-shape {
            position: absolute;
            filter: blur(80px);
            z-index: 0;
            transition: background-color 1s ease;
        }

        /* Card Stack Logic */
        .card-stack {
            perspective: 1000px;
            position: relative;
            width: 100%;
            height: 500px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card {
            position: absolute;
            width: 320px;
            height: 480px;
            border-radius: 24px;
            background-size: cover;
            background-position: center;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            transform-style: preserve-3d;
            will-change: transform, opacity;
        }

        /* Desktop sizing for cards */
        @media (min-width: 768px) {
            .card {
                width: 400px;
                height: 600px;
            }
        }

        /* Scramble Text Cursor */
        .cursor-blink {
            display: inline-block;
            width: 10px;
            height: 40px;
            background: currentColor;
            animation: blink 1s step-end infinite;
            margin-left: 5px;
            vertical-align: middle;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        
        /* Navigation Button Hover Effect */
        .nav-btn {
            position: relative;
            overflow: hidden;
        }
        .nav-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.2);
            transform: skewX(-20deg);
            transition: left 0.3s ease;
        }
        .nav-btn:hover::after {
            left: 100%;
        }
    </style>
</head>
<body class="bg-gray-900 text-white h-screen flex flex-col">

    <nav class="absolute top-0 w-full p-6 flex justify-between items-center z-50">
        <div class="text-2xl font-bold tracking-tighter uppercase">Toy<span class="text-yellow-400">Box</span>.</div>
        <button class="bg-white/10 backdrop-blur-md px-6 py-2 rounded-full border border-white/20 hover:bg-white hover:text-black transition-colors">Menu</button>
    </nav>

    <main class="relative flex-grow flex items-center overflow-hidden">
        
        <div id="bg-orb-1" class="bg-shape top-[-10%] left-[-10%] w-[60vw] h-[60vw] rounded-full bg-purple-600 opacity-30"></div>
        <div id="bg-orb-2" class="bg-shape bottom-[-10%] right-[-10%] w-[50vw] h-[50vw] rounded-full bg-blue-600 opacity-30"></div>

        <div class="container mx-auto px-6 relative z-10 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center h-full">
            
            <div class="flex flex-col items-start justify-center space-y-8 order-2 lg:order-1 mt-10 lg:mt-0">
                
                <div class="flex items-center space-x-3 overflow-hidden">
                    <span class="w-8 h-[2px] bg-yellow-400"></span>
                    <p id="slide-tag" class="text-yellow-400 tracking-widest uppercase font-bold text-sm">New Collection</p>
                </div>

                <h1 class="text-6xl lg:text-8xl font-black leading-[0.9] text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-400">
                    <span id="slide-title">ROBOTIC<br>FUTURE</span>
                </h1>

                <p id="slide-desc" class="text-gray-400 text-lg max-w-md leading-relaxed">
                    Experience the next generation of engineering. Save 50% on your first order.
                </p>

                <div class="flex items-end gap-4 border-l-4 border-white/20 pl-6 py-2">
                    <div>
                        <span class="text-xs text-gray-500 uppercase block">Starting at</span>
                        <span id="slide-price" class="text-3xl font-bold">$129.00</span>
                    </div>
                    <div id="slide-discount" class="bg-red-500 text-xs font-bold px-2 py-1 rounded text-white mb-1">
                        -50% OFF
                    </div>
                </div>

                <div class="flex items-center gap-6 pt-4">
                    <button class="nav-btn bg-white text-black px-8 py-4 rounded-full font-bold text-lg hover:scale-105 transition-transform duration-200 shadow-[0_0_20px_rgba(255,255,255,0.3)]">
                        Shop Now
                    </button>
                    
                    <div class="flex gap-4">
                        <button onclick="nextSlide()" class="w-14 h-14 border border-white/20 rounded-full flex items-center justify-center hover:bg-white hover:text-black transition-all group">
                            <svg class="w-6 h-6 transform group-hover:rotate-[-45deg] transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg>
                        </button>
                    </div>
                </div>
            </div>

            <div class="relative h-full flex items-center justify-center order-1 lg:order-2">
                <div class="card-stack" id="card-stack">
                    </div>
            </div>
        </div>
    </main>

    <div class="absolute bottom-8 right-8 z-50 font-mono text-xs text-gray-500">
        <span id="current-idx">01</span> / <span id="total-idx">04</span>
    </div>

<script>
    // --- Configuration ---
    const slides = [
        {
            title: "NEON\nSPEED",
            desc: "High-velocity racing drones with AI-assisted stabilization.",
            price: "$299.00",
            discount: "-30% OFF",
            tag: "Racing Series",
            color: "#ef4444", // Red
            img: "https://images.unsplash.com/photo-1532585627237-7096e140d04c?q=80&w=1000&auto=format&fit=crop"
        },
        {
            title: "MECHA\nBUILD",
            desc: "Construct your own companion with our modular robotics kit.",
            price: "$149.00",
            discount: "-15% OFF",
            tag: "DIY Kits",
            color: "#3b82f6", // Blue
            img: "https://images.unsplash.com/photo-1485827404703-89b55fcc595e?q=80&w=1000&auto=format&fit=crop"
        },
        {
            title: "RETRO\nGAMER",
            desc: "Limited edition consoles inspired by the golden age of arcade.",
            price: "$89.00",
            discount: "-50% OFF",
            tag: "Limited Edition",
            color: "#eab308", // Yellow
            img: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?q=80&w=1000&auto=format&fit=crop"
        },
        {
            title: "VR\nVISION",
            desc: "Immersive reality headsets that transport you to new worlds.",
            price: "$499.00",
            discount: "-10% OFF",
            tag: "New Arrival",
            color: "#a855f7", // Purple
            img: "https://images.unsplash.com/photo-1622979135228-23964e7d5ce8?q=80&w=1000&auto=format&fit=crop"
        }
    ];

    // --- Setup ---
    const stackContainer = document.getElementById('card-stack');
    let currentIndex = 0;
    let isAnimating = false;

    // --- Initialization ---
    function init() {
        document.getElementById('total-idx').innerText = '0' + slides.length;
        renderCards();
        updateText(0);
        
        // Add 3D Tilt Effect to the whole stack on mousemove
        document.addEventListener('mousemove', (e) => {
            const x = (window.innerWidth / 2 - e.pageX) / 30;
            const y = (window.innerHeight / 2 - e.pageY) / 30;
            
            gsap.to('.card-active', {
                rotationY: x,
                rotationX: y,
                ease: "power1.out",
                duration: 0.5
            });
        });
    }

    // --- Render Cards ---
    // We render them in reverse order visually so the first index is on "top"
    function renderCards() {
        stackContainer.innerHTML = '';
        
        // We render two cards: The Active one, and the "Next" one behind it
        // Determine indices
        let nextIdx = (currentIndex + 1) % slides.length;
        
        // Create Next Card (Behind)
        const nextCard = createCardElement(slides[nextIdx], 'card-next');
        gsap.set(nextCard, { scale: 0.9, y: 30, opacity: 0.6, zIndex: 0 });
        stackContainer.appendChild(nextCard);

        // Create Active Card (Front)
        const activeCard = createCardElement(slides[currentIndex], 'card-active');
        gsap.set(activeCard, { scale: 1, y: 0, opacity: 1, zIndex: 10 });
        stackContainer.appendChild(activeCard);
    }

    function createCardElement(data, id) {
        const div = document.createElement('div');
        div.classList.add('card', id);
        div.style.backgroundImage = `url(${data.img})`;
        
        // Add a gradient overlay for text readability if needed, or style
        div.innerHTML = `
            <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent rounded-[24px]"></div>
            <div class="absolute bottom-6 left-6 text-white">
                <p class="font-bold text-xl">${data.title.replace('\n', ' ')}</p>
            </div>
        `;
        return div;
    }

    // --- Animation Logic ---
    window.nextSlide = function() {
        if (isAnimating) return;
        isAnimating = true;

        const activeCard = document.querySelector('.card-active');
        const nextCard = document.querySelector('.card-next');

        // 1. Throw Active Card Away
        gsap.to(activeCard, {
            x: 500,
            y: -100,
            rotation: 45,
            opacity: 0,
            duration: 0.6,
            ease: "power2.in",
            onComplete: () => {
                activeCard.remove();
            }
        });

        // 2. Bring Next Card to Front
        gsap.to(nextCard, {
            scale: 1,
            y: 0,
            opacity: 1,
            zIndex: 10,
            duration: 0.6,
            ease: "back.out(1.7)", // Bouncy effect
            onComplete: () => {
                nextCard.classList.remove('card-next');
                nextCard.classList.add('card-active');
                
                // Prepare the NEW 'next' card behind
                currentIndex = (currentIndex + 1) % slides.length;
                let futureIdx = (currentIndex + 1) % slides.length;
                
                const futureCard = createCardElement(slides[futureIdx], 'card-next');
                gsap.set(futureCard, { scale: 0.8, y: 50, opacity: 0, zIndex: 0 });
                stackContainer.insertBefore(futureCard, stackContainer.firstChild); // Insert behind
                
                // Animate entrance of background card
                gsap.to(futureCard, {
                    scale: 0.9,
                    y: 30,
                    opacity: 0.6,
                    duration: 0.5
                });
                
                isAnimating = false;
            }
        });

        // 3. Update Text Content
        const nextDataIdx = (currentIndex + 1) % slides.length;
        updateText(nextDataIdx);
        
        // 4. Update Background
        updateBackground(slides[nextDataIdx].color);
    }

    // --- Text Scramble Effect ---
    function updateText(index) {
        const data = slides[index];
        const titleEl = document.getElementById('slide-title');
        
        // Scramble Title
        scrambleText(titleEl, data.title);

        // Fade/Slide others
        gsap.fromTo('#slide-desc', {opacity: 0, y: 10}, {opacity: 1, y: 0, duration: 0.5, delay: 0.2});
        gsap.fromTo('#slide-price', {opacity: 0, x: -10}, {opacity: 1, x: 0, duration: 0.5, delay: 0.3});
        
        // Update Static content
        document.getElementById('slide-desc').innerText = data.desc;
        document.getElementById('slide-price').innerText = data.price;
        document.getElementById('slide-tag').innerText = data.tag;
        document.getElementById('slide-discount').innerText = data.discount;
        document.getElementById('current-idx').innerText = '0' + (index + 1);

        // Update colors
        document.getElementById('slide-tag').style.color = data.color;
        document.getElementById('slide-discount').style.backgroundColor = data.color;
    }

    function scrambleText(element, finalText) {
        const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890!@#$%^&*";
        let iterations = 0;
        
        const interval = setInterval(() => {
            element.innerText = finalText.split("")
                .map((letter, index) => {
                    if(letter === '\n') return '\n';
                    if(index < iterations) {
                        return finalText[index];
                    }
                    return chars[Math.floor(Math.random() * chars.length)];
                })
                .join("");
            
            if(iterations >= finalText.length) { 
                clearInterval(interval);
            }
            
            iterations += 1/2; // Speed control
        }, 30);
    }

    function updateBackground(color) {
        gsap.to('#bg-orb-1', { backgroundColor: color, duration: 1 });
        gsap.to('#bg-orb-2', { backgroundColor: color, duration: 1, delay: 0.2 });
    }

    // Run
    init();

</script>
</body>
</html>